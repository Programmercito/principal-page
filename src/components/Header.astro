---
import { Icon } from 'astro-icon/components';
---

<header id="main-header" class="fixed top-0 left-0 w-full z-50 transition-all duration-300">
  <div class="container mx-auto px-6 py-4 flex justify-between items-center">
    <div class="text-2xl font-bold text-white">
      <a href="/">Devcito<span class="text-cyan-400">Solutions</span></a>
    </div>
    <nav class="hidden md:flex space-x-2">
      <a href="#services" class="nav-link">Servicios</a>
      <a href="#productos" class="nav-link">Productos</a>
      <a href="#about" class="nav-link">Sobre Mí</a>
      <a href="#contact" class="nav-link">Contacto</a>
    </nav>
    <div class="md:hidden">
      <button id="menu-btn" class="text-white focus:outline-none">
        <Icon name="mdi:menu" class="w-6 h-6" />
      </button>
    </div>
  </div>
  <div id="mobile-menu" class="hidden md:hidden">
    <nav class="flex flex-col items-center space-y-4 py-4">
      <a href="#services" class="text-gray-300 hover:text-cyan-400 transition-colors">Servicios</a>
      <a href="#productos" class="text-gray-300 hover:text-cyan-400 transition-colors">Productos</a>
      <a href="#about" class="text-gray-300 hover:text-cyan-400 transition-colors">Sobre Mí</a>
      <a href="#contact" class="text-gray-300 hover:text-cyan-400 transition-colors">Contacto</a>
    </nav>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Mobile menu script
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const navLinks = mobileMenu.querySelectorAll('a');

    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      // Add scrolled background to mobile menu if header is scrolled
      if (document.getElementById('main-header').classList.contains('header-scrolled')) {
        mobileMenu.classList.add('header-scrolled-mobile');
      }
    });

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
      });
    });

    // Scrolled header script
    const header = document.getElementById('main-header');
    const scrollThreshold = 50;

    const handleScroll = () => {
      if (window.scrollY > scrollThreshold) {
        header.classList.add('header-scrolled');
      } else {
        header.classList.remove('header-scrolled');
      }
    };

    window.addEventListener('scroll', handleScroll);
    handleScroll(); // Run on load to set initial state
  });
</script>

<style>
  .header-scrolled {
    @apply bg-gray-900/80 backdrop-blur-md shadow-lg;
  }

  /* The mobile menu needs its own background when it's open and the page is scrolled */
  #mobile-menu.header-scrolled-mobile,
  .header-scrolled #mobile-menu {
    @apply bg-gray-900/95 backdrop-blur-md;
  }

  .nav-link {
    @apply text-gray-300 relative py-2 px-4 rounded-full;
    text-decoration: none;
    transition: color 0.3s ease, background-color 0.3s ease;
    border: 2px solid transparent;
  }

  .nav-link:hover {
    @apply text-cyan-400;
    border-color: #22d3ee; /* cyan-400 */
    background-color: rgba(34, 211, 238, 0.1);
  }
</style>
