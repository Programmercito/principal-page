---
import { Icon } from 'astro-icon/components';
---

<section id="home" class="relative min-h-screen flex items-center justify-center text-center text-white overflow-hidden">
  <!-- Deep space background -->
  <div class="absolute inset-0 z-0">
    <div class="bg-overlay"></div>
    <!-- Aurora shapes -->
    <div class="aurora-shape shape-1"></div>
    <div class="aurora-shape shape-2"></div>
    <div class="aurora-shape shape-3"></div>
    <div class="aurora-shape shape-4"></div>
    <!-- Particle grid -->
    <canvas id="particles-canvas" class="absolute inset-0 w-full h-full opacity-30"></canvas>
  </div>

  <div class="z-10 relative px-6 max-w-5xl mx-auto pt-28 pb-20">
    <!-- Badge -->
    <div class="inline-flex items-center gap-2 bg-white/5 border border-white/10 backdrop-blur-md rounded-full px-4 py-2 mb-8 fade-in-element">
      <span class="w-2 h-2 bg-green-400 rounded-full animate-ping-slow"></span>
      <span class="text-sm text-gray-300 font-medium">Disponible para nuevos proyectos</span>
    </div>

    <!-- Main heading -->
    <h1 class="hero-title mb-6 fade-in-element">
      Desarrollo Web
      <br>
      <span class="gradient-text-hero">Full-Stack</span>
      <br>
      <span class="text-hero-sub">que Impacta</span>
    </h1>

    <p class="text-xl md:text-2xl text-gray-400 mb-10 max-w-2xl mx-auto leading-relaxed fade-in-element">
      Transformo ideas en <span class="text-cyan-400 font-semibold">soluciones digitales</span> de alto rendimiento. 
      Desde landing pages hasta sistemas empresariales completos.
    </p>

    <!-- CTA Buttons -->
    <div class="hero-btns fade-in-element">
      <a href="#productos" class="hbtn hbtn-primary" id="hero-cta-projects">
        <span class="hbtn-shimmer"></span>
        <svg xmlns="http://www.w3.org/2000/svg" class="hbtn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="3" width="20" height="14" rx="2"/>
          <path d="M8 21h8m-4-4v4"/>
        </svg>
        Ver Proyectos
      </a>
      <a href="#contact" class="hbtn hbtn-glass" id="hero-cta-contact">
        <svg xmlns="http://www.w3.org/2000/svg" class="hbtn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
        </svg>
        Cont치ctame
      </a>
    </div>

    <!-- Stats row -->
    <div class="grid grid-cols-3 gap-6 max-w-lg mx-auto fade-in-element">
      <div class="stat-item">
        <span class="stat-number">10+</span>
        <span class="stat-label">Proyectos</span>
      </div>
      <div class="stat-item border-x border-white/10">
        <span class="stat-number">5+</span>
        <span class="stat-label">A침os exp.</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">100%</span>
        <span class="stat-label">Dedicaci칩n</span>
      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-10 flex flex-col items-center gap-2 opacity-60">
    <span class="text-xs text-gray-500 tracking-widest uppercase">Scroll</span>
    <a href="#services" aria-label="Bajar a la secci칩n de servicios" class="scroll-arrow">
      <Icon name="mdi:chevron-down" class="w-6 h-6 animate-bounce text-cyan-400" />
    </a>
  </div>
</section>

<script>
  // Particles canvas animation
  const canvas = document.getElementById('particles-canvas') as HTMLCanvasElement;
  if (canvas) {
    const ctx = canvas.getContext('2d')!;
    let particles: { x: number; y: number; vx: number; vy: number; r: number; alpha: number }[] = [];

    const resize = () => {
      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
    };
    resize();
    window.addEventListener('resize', resize);

    for (let i = 0; i < 80; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.3,
        r: Math.random() * 1.5 + 0.5,
        alpha: Math.random() * 0.5 + 0.2,
      });
    }

    const animate = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(34, 211, 238, ${p.alpha})`;
        ctx.fill();
      });

      // Draw connections
      particles.forEach((a, i) => {
        particles.slice(i + 1).forEach(b => {
          const dist = Math.hypot(a.x - b.x, a.y - b.y);
          if (dist < 120) {
            ctx.beginPath();
            ctx.moveTo(a.x, a.y);
            ctx.lineTo(b.x, b.y);
            ctx.strokeStyle = `rgba(34, 211, 238, ${0.08 * (1 - dist / 120)})`;
            ctx.lineWidth = 0.5;
            ctx.stroke();
          }
        });
      });

      requestAnimationFrame(animate);
    };
    animate();
  }
</script>

<style>
  .bg-overlay {
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 60% 70% at 50% 0%, rgba(34, 211, 238, 0.12) 0%, transparent 60%),
      radial-gradient(ellipse 40% 50% at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
      #020817;
  }

  .aurora-shape {
    position: absolute;
    border-radius: 50%;
    filter: blur(90px);
    pointer-events: none;
  }

  .shape-1 {
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(34, 211, 238, 0.15), transparent 60%);
    top: -200px;
    left: -150px;
    animation: float-1 18s infinite alternate ease-in-out;
  }

  .shape-2 {
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(59, 130, 246, 0.12), transparent 60%);
    bottom: -100px;
    right: -100px;
    animation: float-2 22s infinite alternate ease-in-out;
  }

  .shape-3 {
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(139, 92, 246, 0.1), transparent 60%);
    bottom: 20%;
    left: 20%;
    animation: float-3 25s infinite alternate ease-in-out;
  }

  .shape-4 {
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(34, 211, 238, 0.08), transparent 60%);
    top: 30%;
    right: 15%;
    animation: float-1 20s infinite alternate-reverse ease-in-out;
  }

  @keyframes float-1 {
    from { transform: translate(0, 0) scale(1); }
    to { transform: translate(60px, 40px) scale(1.1); }
  }
  @keyframes float-2 {
    from { transform: translate(0, 0) scale(1); }
    to { transform: translate(-40px, -30px) scale(1.05); }
  }
  @keyframes float-3 {
    from { transform: translate(0, 0) rotate(0deg); }
    to { transform: translate(30px, -40px) rotate(30deg); }
  }

  .hero-title {
    font-family: 'Space Grotesk', sans-serif;
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: 800;
    line-height: 1.05;
    letter-spacing: -0.02em;
    color: white;
  }

  .gradient-text-hero {
    background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 50%, #8b5cf6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-hero-sub {
    font-size: 0.65em;
    font-weight: 400;
    color: #94a3b8;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  /* === HERO BUTTONS === */
  .hero-btns {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 4rem;
  }

  .hbtn {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: 0.01em;
    padding: 0.875rem 2rem;
    border-radius: 50px;
    text-decoration: none;
    overflow: hidden;
    white-space: nowrap;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
  }

  .hbtn-icon {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
  }

  /* Primary: gradient + shimmer sweep + pulse glow */
  .hbtn-primary {
    background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 60%, #8b5cf6 100%);
    color: white;
    box-shadow:
      0 0 25px rgba(34, 211, 238, 0.45),
      0 4px 20px rgba(59, 130, 246, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    animation: hero-pulse 3s ease-in-out infinite;
  }

  .hbtn-primary:hover {
    transform: translateY(-4px) scale(1.03);
    box-shadow:
      0 0 45px rgba(34, 211, 238, 0.65),
      0 10px 35px rgba(59, 130, 246, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.25);
  }

  /* Shimmer sweep animation */
  .hbtn-shimmer {
    position: absolute;
    top: 0;
    left: -100%;
    width: 60%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.22), transparent);
    transform: skewX(-20deg);
    animation: shimmer-sweep 3.5s ease-in-out infinite;
    pointer-events: none;
  }

  @keyframes shimmer-sweep {
    0% { left: -100%; }
    40%, 100% { left: 170%; }
  }

  @keyframes hero-pulse {
    0%, 100% {
      box-shadow: 0 0 25px rgba(34, 211, 238, 0.45), 0 4px 20px rgba(59, 130, 246, 0.35), inset 0 1px 0 rgba(255,255,255,0.2);
    }
    50% {
      box-shadow: 0 0 50px rgba(34, 211, 238, 0.65), 0 8px 30px rgba(59, 130, 246, 0.55), inset 0 1px 0 rgba(255,255,255,0.2);
    }
  }

  /* Secondary: glassmorphism pill with gradient border */
  .hbtn-glass {
    background: rgba(255, 255, 255, 0.04);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    color: #e2e8f0;
    /* Simulate gradient border with box-shadow */
    box-shadow:
      0 0 0 1px rgba(34, 211, 238, 0.35),
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      0 4px 15px rgba(0, 0, 0, 0.2);
  }

  .hbtn-glass:hover {
    background: rgba(34, 211, 238, 0.08);
    color: #22d3ee;
    transform: translateY(-4px) scale(1.03);
    box-shadow:
      0 0 0 1px rgba(34, 211, 238, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.12),
      0 0 30px rgba(34, 211, 238, 0.2),
      0 10px 30px rgba(0, 0, 0, 0.25);
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.75rem;
  }

  .stat-number {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 2rem;
    font-weight: 700;
    background: linear-gradient(135deg, #22d3ee, #3b82f6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1;
  }

  .stat-label {
    font-size: 0.75rem;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-top: 0.25rem;
  }

  @keyframes ping-slow {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.3); }
  }
  .animate-ping-slow {
    animation: ping-slow 2s ease-in-out infinite;
    display: inline-block;
  }
</style>
